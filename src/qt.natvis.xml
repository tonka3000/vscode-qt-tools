<?xml version="1.0" encoding="utf-8"?>

<!--
This file needs to preprocess and should not be direclty use. The reason is the optional
Qt namespace. So this file has magic markers to make it easy to just replace it with the
Qt namespace in the runtime.

A item name with [] indicate that it is a property generated by this file, see natvis documentation
-->

<AutoVisualizer xmlns="http://schemas.microsoft.com/vstudio/debugger/natvis/2010">

  <Type Name="%%QT_NAMESPACE%%QString">
    <DisplayString>{ ((reinterpret_cast&lt;unsigned short*>(d)) + d->offset / 2), sub }</DisplayString>
    <StringView>(( reinterpret_cast&lt;unsigned short*>(d)) + d->offset / 2), sub</StringView>
    <Expand>
      <Item Name="[size]">d->size</Item>
    </Expand>
  </Type>

  <Type Name="%%QT_NAMESPACE%%QByteArray">
    <DisplayString>{{ size= { d->size } }}</DisplayString>
    <Expand>
      <Item Name="[size]">d->size</Item>
    </Expand>
  </Type>

  <Type Name="%%QT_NAMESPACE%%QPoint">
    <DisplayString>{{ x= {xp}, y= {yp} }}</DisplayString>
    <Expand>
      <Item Name="[x]">xp</Item>
      <Item Name="[y]">yp</Item>
    </Expand>
  </Type>

  <Type Name="%%QT_NAMESPACE%%QPointF">
    <DisplayString>{{ x= {xp}, y= {yp} }}</DisplayString>
    <Expand>
      <Item Name="[x]">xp</Item>
      <Item Name="[y]">yp</Item>
    </Expand>
  </Type>

  <Type Name="%%QT_NAMESPACE%%QVector&lt;*>">
    <DisplayString>{{ size= { d->size } }}</DisplayString>
    <Expand>
      <Item Name="[size]">d->size</Item>
      <ArrayItems>
        <Size>d->size</Size>
        <ValuePointer>($T1*)((reinterpret_cast&lt;char>(d)) + d->offset)</ValuePointer>
      </ArrayItems>
    </Expand>
  </Type>

  <Type Name="%%QT_NAMESPACE%%QList&lt;*>">
    <AlternativeType Name="%%QT_NAMESPACE%%QStringList"></AlternativeType>
    <DisplayString>{{ size= {d->end - d->begin} }}</DisplayString>
    <Expand>
      <Item Name="[size]">d->end - d->begin</Item>
      <!-- TODO add values here-->
    </Expand>
  </Type>

<!-- missing types
QRectF
QSize
QRect
QPolygon
QPolygonF
QLine
QSizePolicy
QChar
QDate
QTime
QRegularExpression
QSharedPointer
QPointer
QWeakPointer
QScopedPointer
QScopedArrayPointer
QLinkedList
QMapNode
QMap
QHash
QHashNode
QSet
QCache
QVariant
-->

</AutoVisualizer>
